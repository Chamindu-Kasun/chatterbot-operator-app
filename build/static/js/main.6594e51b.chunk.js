(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t,c){},122:function(e,t,c){},123:function(e,t,c){},124:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),a=c(32),r=c.n(a),i=c(56),o=c(7),l=c.n(o),u=c(22),j=c(4),d=(c(88),c(36)),p=c(139),b=c(140),h=c(141),m=c(142),O=c.p+"static/media/profile.2d3ce0dd.jpg",x=(c(89),c(1)),f=function(){return Object(x.jsxs)("div",{className:"topbarContainer px-0",children:[Object(x.jsx)("div",{className:"topbarLeft",children:Object(x.jsx)(d.b,{to:"/",style:{textDecoration:"none"},children:Object(x.jsx)("span",{className:"logo",children:"mobiOs"})})}),Object(x.jsx)("div",{className:"topbarCenter",children:Object(x.jsxs)("div",{className:"searchbar",children:[Object(x.jsx)(p.a,{className:"searchIcon"}),Object(x.jsx)("input",{placeholder:"Search",className:"searchInput"})]})}),Object(x.jsxs)("div",{className:"topbarRight",children:[Object(x.jsxs)("div",{className:"topbarIcons",children:[Object(x.jsxs)("div",{className:"topbarIconItem",children:[Object(x.jsx)(b.a,{}),Object(x.jsx)("span",{className:"topbarIconBadge",children:"1"})]}),Object(x.jsxs)("div",{className:"topbarIconItem",children:[Object(x.jsx)(h.a,{}),Object(x.jsx)("span",{className:"topbarIconBadge",children:"2"})]}),Object(x.jsxs)("div",{className:"topbarIconItem",children:[Object(x.jsx)(m.a,{}),Object(x.jsx)("span",{className:"topbarIconBadge",children:"1"})]})]}),Object(x.jsx)("img",{src:O,alt:"user profile picture",className:"topbarImg"})]})]})},v=(c(95),c.p,function(e){var t=e.conversation,c=(e.currentUser,t.client_name);return Object(x.jsxs)("div",{className:"conversation",children:[Object(x.jsx)("img",{className:"conversationImg",src:"https://images.pexels.com/photos/4547577/pexels-photo-4547577.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",alt:""}),Object(x.jsx)("span",{className:"conversationName",children:c})]})}),g=(c(96),c(81)),N=c(143),I=function(e){var t=e.own,c=e.message,n=e.date;return Object(x.jsx)(N.a,{fluid:!0,children:Object(x.jsx)("div",{className:!0===t?"message own":"message",children:Object(x.jsxs)("div",{className:"messageTop",children:[Object(x.jsx)("img",{className:"messageImg",src:!0===t?O:"https://images.pexels.com/photos/4547577/pexels-photo-4547577.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",alt:""}),Object(x.jsxs)("div",{className:"messageText",children:[c,Object(x.jsx)("p",{className:"messageBottom",children:Object(g.a)(n)})]})]})})})},w=(c(97),c(26)),k=c.n(w),y=function(e){var t=e.onlineOperators,c=(e.currentUserId,e.setCurrentChat,Object(n.useState)([])),s=Object(j.a)(c,2),a=s[0],r=s[1],i=Object(n.useState)([]),o=Object(j.a)(i,2),d=(o[0],o[1]);return Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("https://mobios-chatter-app-backend.herokuapp.com/api/operators");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(n.useEffect)((function(){d(a.filter((function(e){return t.includes(e._id)})))}),[t,a]),Object(x.jsx)("div",{className:"chatOnline",children:a.map((function(e){return Object(x.jsxs)("div",{className:"chatOnlineFriend",children:[Object(x.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(x.jsx)("img",{className:"chatOnlineImg",src:"https://images.pexels.com/photos/1391498/pexels-photo-1391498.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",alt:""}),Object(x.jsx)("div",{className:"chatOnlineBadge"})]}),Object(x.jsx)("span",{className:"chatOnlineName",children:null===e||void 0===e?void 0:e.username})]},e._id)}))})},C=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};default:return e}},S={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},_=Object(n.createContext)(S),B=function(e){var t=e.children,c=Object(n.useReducer)(C,S),s=Object(j.a)(c,2),a=s[0],r=s[1];return Object(n.useEffect)((function(){localStorage.setItem("user",JSON.stringify(a.user))}),[a.user]),Object(x.jsx)(_.Provider,{value:{user:a.user,isFetching:a.isFetching,error:a.error,dispatch:r},children:t})},R=c(80),E=(c(120),c(55)),A=c(54),L=function(e){var t=e.onAccept,c=e.client,s=Object(n.useState)(!1),a=Object(j.a)(s,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){i(!0)}),[c]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(E.a,{show:r,variant:"success",children:[Object(x.jsx)(E.a.Heading,{children:"Operator Requested !"}),Object(x.jsx)("p",{children:"A client has requested for an operator support. Are you available now?"}),Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)(A.a,{onClick:function(){i(!1),t()},variant:"outline-success",children:"Available!"}),Object(x.jsx)(A.a,{className:"ms-5",onClick:function(){return i(!1)},variant:"outline-danger",children:"Not Available!"})]})]})})},F=c(144),U=c(145),T=function(){var e=Object(n.useContext)(_).user,t=Object(n.useState)([]),c=Object(j.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)(null),o=Object(j.a)(r,2),d=o[0],p=o[1],b=Object(n.useState)([]),h=Object(j.a)(b,2),m=h[0],O=h[1],g=Object(n.useState)(""),w=Object(j.a)(g,2),C=w[0],S=w[1],B=Object(n.useState)(null),E=Object(j.a)(B,2),A=E[0],T=E[1],q=Object(n.useRef)(),D=Object(n.useRef)(),M=Object(n.useState)(null),G=Object(j.a)(M,2),P=G[0],W=G[1],J=Object(n.useState)([]),V=Object(j.a)(J,2),H=V[0],z=V[1];Object(n.useEffect)((function(){D.current=Object(R.a)("https://chatter-bot-app-socket-server.herokuapp.com"),D.current.on("getMessage",(function(e){W({sender:e.receiver,text:e.text,createdAt:Date.now()})}))}),[]),Object(n.useEffect)((function(){D.current.on("newClient",(function(e){T({sender:e.from,client:e.client,createdAt:Date.now()})}))}),[]),Object(n.useEffect)((function(){var t=function(){var t=Object(u.a)(l.a.mark((function t(){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get("https://mobios-chatter-app-backend.herokuapp.com/api/conversations/"+e._id);case 3:c=t.sent,console.log("Conversations",c.data),a(c.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();t()}),[e._id,A]),Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0===A){e.next=6;break}return e.next=4,k.a.get("https://mobios-chatter-app-backend.herokuapp.com/api/messages/"+(null===d||void 0===d?void 0:d._id));case 4:t=e.sent,O(t.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[d]);var K=function(){var t=Object(u.a)(l.a.mark((function t(c){var n,s,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),n={sender:e._id,text:C,conversationId:d._id},s=d.members.find((function(t){return t!==e._id})),a=d.conversation_media,D.current.emit("sendMessage",{senderId:e._id,receiverId:"123456789",text:C,receiver:s,media:a}),t.prev=5,t.next=8,k.a.post("https://mobios-chatter-app-backend.herokuapp.com/api/messages",n);case 8:r=t.sent,O([r.data].concat(Object(i.a)(m))),S(""),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){var e;null===(e=q.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[m]),Object(n.useEffect)((function(){D.current.emit("addUser",e._id,(function(e){e&&console.log(e)})),D.current.on("getUsers",(function(e){z(e)}))}),[e]),Object(n.useEffect)((function(){P&&(null===d||void 0===d?void 0:d.members.includes(P.sender))&&O((function(e){return[P].concat(Object(i.a)(e))}))}),[P,d]);var Q=function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D.current.emit("clientAccepted",{operatorId:e._id,receiverId:"123456789"}),t.next=3,X(A.client.senderId,e._id,e.username,A.client.media);case 3:T(null);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(l.a.mark((function e(t,c,n,s){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={senderId:t,operatorId:c,operatorName:n,media:s},e.next=3,k.a.post("https://mobios-chatter-app-backend.herokuapp.com/operator",a);case 3:case"end":return e.stop()}}),e)})));return function(t,c,n,s){return e.apply(this,arguments)}}();return Object(x.jsxs)(N.a,{fluid:!0,children:[Object(x.jsx)(F.a,{children:Object(x.jsx)(f,{})}),function(){if(null!==A)return Object(x.jsx)(L,{client:A,onAccept:Q})}(),Object(x.jsxs)(F.a,{className:"messenger",children:[Object(x.jsx)(U.a,{className:"chatMenu px-0",xs:12,lg:3,md:3,children:Object(x.jsxs)("div",{className:"chatMenuWrapper",children:[Object(x.jsx)("h4",{className:"rightbarTitle",children:"Client Messages"}),s.map((function(t,c){return Object(x.jsx)("div",{onClick:function(){return p(t)},children:Object(x.jsx)(v,{conversation:t,currentUser:e},c)},c)}))]})}),Object(x.jsx)(U.a,{className:"chatBox px-0 py-0",xs:12,lg:6,md:9,children:Object(x.jsx)("div",{className:"chatBoxWrapper px-0 mx-3 py-0",children:d?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(F.a,{className:"py-3 active-chat px-0 ",children:Object(x.jsx)(U.a,{className:"text-center",children:function(){var e=d.client_name,t=d.conversation_media;return Object(x.jsxs)("div",{className:"mx-1",children:[e," from ",t]})}()})}),Object(x.jsx)(F.a,{className:"chatBoxTop",children:m.slice(0).reverse().map((function(t,c){return Object(x.jsx)("div",{className:"chatBoxMsg my-0 py-0",ref:q,children:Object(x.jsx)(I,{message:t.text,date:t.createdAt,own:t.sender===e._id},c)},c)}))}),Object(x.jsxs)(F.a,{className:"chatBoxBottom py-2",children:[Object(x.jsx)(U.a,{lg:10,className:"mx-0",children:Object(x.jsx)("textarea",{className:"chatMessageInput",placeholder:"message",onChange:function(e){return S(e.target.value)},value:C})}),Object(x.jsx)(U.a,{lg:2,children:Object(x.jsx)("button",{className:"chatSubmitButton",onClick:K,children:"Send"})})]})]}):Object(x.jsx)("span",{className:"noConversationText",children:"Select a conversation to response."})})}),Object(x.jsx)(U.a,{className:"chatOnline",xs:12,lg:3,md:3,children:Object(x.jsxs)("div",{className:"chatOnlineWrapper",children:[Object(x.jsx)("h4",{className:"rightbarTitle",children:"Operators"}),Object(x.jsx)(y,{onlineOperators:H,currentUserId:e._id,setCurrentChat:p})]})})]})]})},q=c(5),D=(c(121),function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),s=Object(n.useRef)(),a=Object(q.g)(),r=function(){var n=Object(u.a)(l.a.mark((function n(r){var i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),s.current.value===c.current.value){n.next=5;break}s.current.setCustomValidity("Passwords don't match!"),n.next=17;break;case 5:return i={username:e.current.value,email:t.current.value,password:c.current.value},console.log("user",i),n.prev=7,console.log("user",i),n.next=11,k.a.post("https://mobios-chatter-app-backend.herokuapp.com/api/auth/register",i);case 11:a.push("/login"),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(7),console.log(n.t0);case 17:case"end":return n.stop()}}),n,null,[[7,14]])})));return function(e){return n.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"login",children:Object(x.jsxs)("div",{className:"loginWrapper",children:[Object(x.jsxs)("div",{className:"loginLeft",children:[Object(x.jsx)("h3",{className:"loginLogo",children:"ChatterBot"}),Object(x.jsx)("span",{className:"loginDesc",children:"Operator registration interface for the ChatterBot application."})]}),Object(x.jsx)("div",{className:"loginRight",children:Object(x.jsxs)("form",{className:"loginBox",onSubmit:r,children:[Object(x.jsx)("input",{placeholder:"Username",required:!0,ref:e,className:"loginInput"}),Object(x.jsx)("input",{placeholder:"Email",required:!0,ref:t,className:"loginInput",type:"email"}),Object(x.jsx)("input",{placeholder:"Password",required:!0,ref:c,className:"loginInput",type:"password",minLength:"6"}),Object(x.jsx)("input",{placeholder:"Password Again",required:!0,ref:s,className:"loginInput",type:"password"}),Object(x.jsx)("button",{className:"loginButton",type:"submit",children:"Sign Up"}),Object(x.jsx)("button",{className:"loginRegisterButton",children:"Log into Account"})]})})]})})}),M=function(){var e=Object(u.a)(l.a.mark((function e(t,c){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"LOGIN_START"}),e.prev=1,e.next=4,k.a.post("https://mobios-chatter-app-backend.herokuapp.com/api/auth/login",t);case 4:n=e.sent,c({type:"LOGIN_SUCCESS",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"LOGIN_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,c){return e.apply(this,arguments)}}(),G=(c(122),function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useContext)(_),s=c.isFetching,a=c.dispatch;return Object(x.jsx)("div",{className:"login",children:Object(x.jsxs)("div",{className:"loginWrapper",children:[Object(x.jsxs)("div",{className:"loginLeft",children:[Object(x.jsx)("h3",{className:"loginLogo",children:"ChatterBot"}),Object(x.jsx)("span",{className:"loginDesc",children:"Operator login interface for the ChatterBot application."})]}),Object(x.jsx)("div",{className:"loginRight",children:Object(x.jsxs)("form",{className:"loginBox",onSubmit:function(c){c.preventDefault(),M({email:e.current.value,password:t.current.value},a)},children:[Object(x.jsx)("input",{placeholder:"Email",type:"email",required:!0,className:"loginInput",ref:e}),Object(x.jsx)("input",{placeholder:"Password",type:"password",required:!0,minLength:"6",className:"loginInput",ref:t}),Object(x.jsx)("button",{className:"loginButton",type:"submit",disabled:s,children:s?"loading":"Log In"}),Object(x.jsx)("span",{className:"loginForgot",children:"Forgot Password?"}),Object(x.jsx)("button",{className:"loginRegisterButton",children:s?"loading":"Create a New Account"})]})})]})})});c(123);var P=function(){var e=Object(n.useContext)(_).user;return Object(x.jsx)(d.a,{children:Object(x.jsxs)(q.d,{children:[Object(x.jsx)(q.b,{exact:!0,path:"/",children:e?Object(x.jsx)(T,{}):Object(x.jsx)(D,{})}),Object(x.jsx)(q.b,{exact:!0,path:"/register",children:e?Object(x.jsx)(q.a,{to:"/"}):Object(x.jsx)(D,{})}),Object(x.jsx)(q.b,{path:"/login",children:e?Object(x.jsx)(q.a,{to:"/"}):Object(x.jsx)(G,{})})]})})};r.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(B,{children:Object(x.jsx)(P,{})})}),document.getElementById("root"))},88:function(e,t,c){},89:function(e,t,c){},95:function(e,t,c){},96:function(e,t,c){},97:function(e,t,c){}},[[124,1,2]]]);
//# sourceMappingURL=main.6594e51b.chunk.js.map